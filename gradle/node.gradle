// Configure the plugin to download and use specific Node version
node {
    download = true
    version = "24.1.0"
}

tasks.register('installFrontend', NpmTask) {
    workingDir = file("${project.projectDir}/frontend")
    args = ['install']
}

tasks.register('buildFrontend', NpmTask) {
    dependsOn 'installFrontend'
    workingDir = file("${project.projectDir}/frontend")
    args = ['run', 'build']
}

tasks.register('copyFrontend', Copy) {
    dependsOn 'buildFrontend'
    from "${project.projectDir}/frontend/dist"
    into "${project.projectDir}/build/resources/main/static"
}

processResources.dependsOn copyFrontend